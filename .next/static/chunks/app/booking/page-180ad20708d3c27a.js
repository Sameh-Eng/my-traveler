(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8355],{3161:function(e,s,a){Promise.resolve().then(a.bind(a,7837))},7837:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return L}});var r=a(7437),t=a(2265),l=a(9376),i=a(6381),n=a(5805),c=a(1047),d=a(2449),o=a(8226),m=a(9322),x=a(3245),h=a(2660),p=a(3229),u=a(401),j=a(407),f=a(2451),g=a(1671),N=a(6334),v=a(757),y=a(1505),b=a(3448);let w=t.forwardRef((e,s)=>{let{className:a,value:t,...l}=e;return(0,r.jsx)(y.fC,{ref:s,className:(0,b.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...l,children:(0,r.jsx)(y.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})});w.displayName=y.fC.displayName;var Z=a(2391),k=a(9501),C=a(3590),S=a(7119),P=a(2489),A=a(2369),F=a(9202),_=a(3041),I=a(9345),E=a(9397),R=a(2827),B=a(6819),M=a(6536),z=a(4626),q=a(1968);let D=S.Ry({title:S.Km(["Mr","Mrs","Ms","Mx","Dr"],{required_error:"Title is required"}),firstName:S.Z_().min(2,"First name must be at least 2 characters").max(50,"First name too long").regex(/^[a-zA-Z\s'-]+$/,"Invalid characters in name"),middleName:S.Z_().optional(),lastName:S.Z_().min(2,"Last name must be at least 2 characters").max(50,"Last name too long").regex(/^[a-zA-Z\s'-]+$/,"Invalid characters in name"),dateOfBirth:S.Z_().refine(e=>{let s=new Date(e),a=(0,b.Fw)(s);return!isNaN(s.getTime())&&a>=0&&a<=120},"Please enter a valid date of birth"),gender:S.Km(["M","F","X"],{required_error:"Gender is required"}),passportNumber:S.Z_().min(6,"Passport number too short").max(20,"Passport number too long").regex(/^[A-Z0-9]+$/,"Invalid passport format (letters and numbers only)"),passportExpiry:S.Z_().refine(e=>{let s=new Date(e),a=new Date;return!isNaN(s.getTime())&&s>a},"Passport must be valid"),passportCountry:S.Z_().min(2,"Country code required"),email:S.Z_().email("Invalid email format"),phone:S.Z_().regex(/^\+?[\d\s\-\(\)]+$/,"Invalid phone format").min(10,"Phone number too short"),specialAssistance:S.IX(S.Z_()).optional(),dietaryRestrictions:S.IX(S.Z_()).optional(),frequentFlyer:S.IX(S.Ry({airline:S.Z_().min(1,"Airline required"),number:S.Z_().min(1,"Frequent flyer number required")})).optional(),seatPreference:S.Km(["window","aisle","middle","any"]).optional(),mealPreference:S.Z_().optional()});var O=e=>{var s,a,l,i,n;let{passengerIndex:d,passenger:m,onSave:h,onRemove:p,canRemove:u=!1,isAdult:j=!0}=e,[f,g]=(0,t.useState)(!1),{updatePassenger:y}=(0,Z.ML)(),{register:b,handleSubmit:w,control:S,watch:O,setValue:Q,formState:{errors:L,isValid:G,isDirty:T},trigger:Y}=(0,k.cI)({resolver:(0,C.F)(D),defaultValues:{title:j?"Mr":"Ms",firstName:(null==m?void 0:m.firstName)||"",middleName:(null==m?void 0:m.middleName)||"",lastName:(null==m?void 0:m.lastName)||"",dateOfBirth:(null==m?void 0:m.dateOfBirth)?new Date(m.dateOfBirth).toISOString().split("T")[0]:"",gender:(null==m?void 0:m.gender)||"M",passportNumber:(null==m?void 0:null===(s=m.passport)||void 0===s?void 0:s.number)||"",passportExpiry:(null==m?void 0:null===(a=m.passport)||void 0===a?void 0:a.expiry)?new Date(m.passport.expiry).toISOString().split("T")[0]:"",passportCountry:(null==m?void 0:null===(l=m.passport)||void 0===l?void 0:l.country)||"EG",email:(null==m?void 0:null===(i=m.contact)||void 0===i?void 0:i.email)||"",phone:(null==m?void 0:null===(n=m.contact)||void 0===n?void 0:n.phone)||"",specialAssistance:(null==m?void 0:m.specialAssistance)||[],dietaryRestrictions:(null==m?void 0:m.dietaryRestrictions)||[],frequentFlyer:(null==m?void 0:m.frequentFlyer)||[],seatPreference:(null==m?void 0:m.seatPreference)||"any",mealPreference:(null==m?void 0:m.mealPreference)||"standard"}}),K=O("specialAssistance")||[],V=O("frequentFlyer")||[],U=[{code:"EG",name:"Egypt"},{code:"SA",name:"Saudi Arabia"},{code:"AE",name:"United Arab Emirates"},{code:"KW",name:"Kuwait"},{code:"QA",name:"Qatar"},{code:"BH",name:"Bahrain"},{code:"OM",name:"Oman"},{code:"JO",name:"Jordan"},{code:"LB",name:"Lebanon"},{code:"PS",name:"Palestine"},{code:"IQ",name:"Iraq"},{code:"SY",name:"Syria"},{code:"YE",name:"Yemen"},{code:"LY",name:"Libya"},{code:"TN",name:"Tunisia"},{code:"DZ",name:"Algeria"},{code:"MA",name:"Morocco"},{code:"SD",name:"Sudan"},{code:"US",name:"United States"},{code:"CA",name:"Canada"},{code:"GB",name:"United Kingdom"},{code:"AU",name:"Australia"},{code:"DE",name:"Germany"},{code:"FR",name:"France"},{code:"IT",name:"Italy"},{code:"ES",name:"Spain"},{code:"NL",name:"Netherlands"},{code:"BE",name:"Belgium"},{code:"CH",name:"Switzerland"},{code:"AT",name:"Austria"},{code:"SE",name:"Sweden"},{code:"NO",name:"Norway"},{code:"DK",name:"Denmark"},{code:"FI",name:"Finland"},{code:"PL",name:"Poland"},{code:"GR",name:"Greece"},{code:"TR",name:"Turkey"},{code:"RU",name:"Russia"},{code:"JP",name:"Japan"},{code:"CN",name:"China"},{code:"KR",name:"South Korea"},{code:"IN",name:"India"},{code:"PK",name:"Pakistan"},{code:"ID",name:"Indonesia"},{code:"MY",name:"Malaysia"},{code:"SG",name:"Singapore"},{code:"TH",name:"Thailand"},{code:"PH",name:"Philippines"},{code:"VN",name:"Vietnam"},{code:"BR",name:"Brazil"},{code:"MX",name:"Mexico"},{code:"AR",name:"Argentina"},{code:"CO",name:"Colombia"},{code:"ZA",name:"South Africa"},{code:"NG",name:"Nigeria"},{code:"KE",name:"Kenya"},{code:"ET",name:"Ethiopia"}],X=[{code:"AA",name:"American Airlines"},{code:"DL",name:"Delta Air Lines"},{code:"UA",name:"United Airlines"},{code:"SW",name:"Southwest Airlines"},{code:"BA",name:"British Airways"},{code:"LH",name:"Lufthansa"},{code:"AF",name:"Air France"},{code:"KL",name:"KLM"},{code:"EK",name:"Emirates"},{code:"SQ",name:"Singapore Airlines"}],$=(e,s)=>{Q("specialAssistance",s?[...K,e]:K.filter(s=>s!==e))},H=(e,s)=>{Q("dietaryRestrictions",s?[...K,e]:K.filter(s=>s!==e))},J=e=>{Q("frequentFlyer",V.filter((s,a)=>a!==e))};return(0,r.jsxs)(v.Zb,{children:[(0,r.jsxs)(v.Ol,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(v.ll,{children:["Passenger ",d+1," ",!j&&"(Child/Infant)"]}),u&&(0,r.jsx)(N.z,{variant:"ghost",size:"icon",onClick:p,className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(P.Z,{className:"h-4 w-4"})})]}),(0,r.jsx)(v.SZ,{children:"Please enter passenger details as they appear on their passport or government-issued ID"})]}),(0,r.jsx)(v.aY,{children:(0,r.jsxs)("form",{onSubmit:w(e=>{let s={id:(null==m?void 0:m.id)||"passenger_".concat(Date.now()),firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,dateOfBirth:e.dateOfBirth,gender:e.gender,passport:{number:e.passportNumber,expiry:e.passportExpiry,country:e.passportCountry},contact:{email:e.email,phone:e.phone},specialAssistance:e.specialAssistance||[],dietaryRestrictions:e.dietaryRestrictions,frequentFlyer:e.frequentFlyer||[],seatPreference:e.seatPreference,mealPreference:e.mealPreference};h(s),y(s.id,s)}),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold flex items-center space-x-2",children:[(0,r.jsx)(A.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Personal Information"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(z._,{htmlFor:"title-".concat(d),children:"Title *"}),(0,r.jsx)(k.Qr,{name:"title",control:S,render:e=>{let{field:s}=e;return(0,r.jsxs)(B.Ph,{value:s.value,onValueChange:s.onChange,children:[(0,r.jsx)(B.i4,{children:(0,r.jsx)(B.ki,{})}),(0,r.jsxs)(B.Bw,{children:[(0,r.jsx)(B.Ql,{value:"Mr",children:"Mr"}),(0,r.jsx)(B.Ql,{value:"Mrs",children:"Mrs"}),(0,r.jsx)(B.Ql,{value:"Ms",children:"Ms"}),(0,r.jsx)(B.Ql,{value:"Mx",children:"Mx"}),(0,r.jsx)(B.Ql,{value:"Dr",children:"Dr"})]})]})}}),L.title&&(0,r.jsx)("p",{className:"text-xs text-red-600 mt-1",children:L.title.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(z._,{htmlFor:"firstName-".concat(d),children:"First Name *"}),(0,r.jsx)(R.I,{...b("firstName"),placeholder:"First name",error:!!L.firstName}),L.firstName&&(0,r.jsx)("p",{className:"text-xs text-red-600 mt-1",children:L.firstName.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(z._,{htmlFor:"middleName-".concat(d),children:"Middle Name"}),(0,r.jsx)(R.I,{...b("middleName"),placeholder:"Middle name (optional)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(z._,{htmlFor:"lastName-".concat(d),children:"Last Name *"}),(0,r.jsx)(R.I,{...b("lastName"),placeholder:"Last name",error:!!L.lastName}),L.lastName&&(0,r.jsx)("p",{className:"text-xs text-red-600 mt-1",children:L.lastName.message})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(z._,{htmlFor:"dateOfBirth-".concat(d),children:[(0,r.jsx)(c.Z,{className:"inline h-4 w-4 mr-1"}),"Date of Birth *"]}),(0,r.jsx)(R.I,{...b("dateOfBirth"),type:"date",error:!!L.dateOfBirth}),L.dateOfBirth&&(0,r.jsx)("p",{className:"text-xs text-red-600 mt-1",children:L.dateOfBirth.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(z._,{children:"Gender *"}),(0,r.jsx)(k.Qr,{name:"gender",control:S,render:e=>{let{field:s}=e;return(0,r.jsxs)(q.E,{value:s.value,onValueChange:s.onChange,className:"flex space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(q.m,{value:"M",id:"male"}),(0,r.jsx)(z._,{htmlFor:"male",children:"Male"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(q.m,{value:"F",id:"female"}),(0,r.jsx)(z._,{htmlFor:"female",children:"Female"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(q.m,{value:"X",id:"other"}),(0,r.jsx)(z._,{htmlFor:"other",children:"Other"})]})]})}}),L.gender&&(0,r.jsx)("p",{className:"text-xs text-red-600 mt-1",children:L.gender.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(z._,{children:"Seat Preference"}),(0,r.jsx)(k.Qr,{name:"seatPreference",control:S,render:e=>{let{field:s}=e;return(0,r.jsxs)(B.Ph,{value:s.value,onValueChange:s.onChange,children:[(0,r.jsx)(B.i4,{children:(0,r.jsx)(B.ki,{})}),(0,r.jsxs)(B.Bw,{children:[(0,r.jsx)(B.Ql,{value:"any",children:"No preference"}),(0,r.jsx)(B.Ql,{value:"window",children:"Window"}),(0,r.jsx)(B.Ql,{value:"aisle",children:"Aisle"}),(0,r.jsx)(B.Ql,{value:"middle",children:"Middle"})]})]})}})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold flex items-center space-x-2",children:[(0,r.jsx)(F.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Passport Information"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(z._,{htmlFor:"passportNumber-".concat(d),children:"Passport Number *"}),(0,r.jsx)(R.I,{...b("passportNumber"),placeholder:"Passport number",error:!!L.passportNumber}),L.passportNumber&&(0,r.jsx)("p",{className:"text-xs text-red-600 mt-1",children:L.passportNumber.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(z._,{htmlFor:"passportExpiry-".concat(d),children:"Expiry Date *"}),(0,r.jsx)(R.I,{...b("passportExpiry"),type:"date",error:!!L.passportExpiry}),L.passportExpiry&&(0,r.jsx)("p",{className:"text-xs text-red-600 mt-1",children:L.passportExpiry.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(z._,{htmlFor:"passportCountry-".concat(d),children:"Issuing Country *"}),(0,r.jsx)(k.Qr,{name:"passportCountry",control:S,render:e=>{let{field:s}=e;return(0,r.jsxs)(B.Ph,{value:s.value,onValueChange:s.onChange,children:[(0,r.jsx)(B.i4,{children:(0,r.jsx)(B.ki,{})}),(0,r.jsx)(B.Bw,{children:U.map(e=>(0,r.jsx)(B.Ql,{value:e.code,children:e.name},e.code))})]})}})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold flex items-center space-x-2",children:[(0,r.jsx)(_.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Contact Information"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(z._,{htmlFor:"email-".concat(d),children:[(0,r.jsx)(I.Z,{className:"inline h-4 w-4 mr-1"}),"Email Address *"]}),(0,r.jsx)(R.I,{...b("email"),type:"email",placeholder:"email@example.com",error:!!L.email}),L.email&&(0,r.jsx)("p",{className:"text-xs text-red-600 mt-1",children:L.email.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(z._,{htmlFor:"phone-".concat(d),children:[(0,r.jsx)(_.Z,{className:"inline h-4 w-4 mr-1"}),"Phone Number *"]}),(0,r.jsx)(R.I,{...b("phone"),type:"tel",placeholder:"+1 (555) 123-4567",error:!!L.phone}),L.phone&&(0,r.jsx)("p",{className:"text-xs text-red-600 mt-1",children:L.phone.message})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold flex items-center space-x-2",children:[(0,r.jsx)(x.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Special Requirements"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(z._,{className:"text-sm font-medium mb-2 block",children:"Special Assistance"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:["Wheelchair assistance","Visual impairment","Hearing impairment","Mobility assistance","Medical equipment","Service animal"].map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(M.X,{id:"assistance-".concat(e,"-").concat(d),checked:K.includes(e),onCheckedChange:s=>$(e,s)}),(0,r.jsx)(z._,{htmlFor:"assistance-".concat(e,"-").concat(d),className:"text-sm",children:e})]},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(z._,{className:"text-sm font-medium mb-2 block",children:"Dietary Restrictions"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:["Vegetarian","Vegan","Gluten-free","Halal","Kosher","Diabetic","Low sodium","Child meal"].map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(M.X,{id:"dietary-".concat(e,"-").concat(d),checked:K.includes(e),onCheckedChange:s=>H(e,s)}),(0,r.jsx)(z._,{htmlFor:"dietary-".concat(e,"-").concat(d),className:"text-sm",children:e})]},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold flex items-center space-x-2",children:[(0,r.jsx)(o.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Frequent Flyer Programs"})]}),(0,r.jsxs)(N.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{Q("frequentFlyer",[...V,{airline:"",number:""}])},children:[(0,r.jsx)(E.Z,{className:"h-4 w-4 mr-1"}),"Add Program"]})]}),V.map((e,s)=>(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(z._,{children:"Airline"}),(0,r.jsx)(k.Qr,{name:"frequentFlyer.".concat(s,".airline"),control:S,render:e=>{let{field:s}=e;return(0,r.jsxs)(B.Ph,{value:s.value,onValueChange:s.onChange,children:[(0,r.jsx)(B.i4,{children:(0,r.jsx)(B.ki,{})}),(0,r.jsx)(B.Bw,{children:X.map(e=>(0,r.jsx)(B.Ql,{value:e.code,children:e.name},e.code))})]})}})]}),(0,r.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(z._,{children:"Number"}),(0,r.jsx)(R.I,{...b("frequentFlyer.".concat(s,".number")),placeholder:"Frequent flyer number"})]}),V.length>1&&(0,r.jsx)(N.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>J(s),className:"text-red-600",children:(0,r.jsx)(P.Z,{className:"h-4 w-4"})})]})]},s))]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)(N.z,{type:"button",variant:"outline",children:"Save Draft"}),(0,r.jsx)(N.z,{type:"submit",children:"Save Passenger"})]})]})})]})},Q=()=>{var e,s,a;let y=(0,l.useRouter)(),k=(0,l.useSearchParams)().get("flightId"),{selectedFlights:C,passengers:S,currentStep:P,completedSteps:A,nextStep:F,previousStep:_,validateStep:I,calculateTotal:E,saveDraft:R,loadDraft:B,clearBooking:M,nextStep:z,getBookingSummary:q,addPassenger:D,removePassenger:Q,updatePassenger:L}=(0,Z.ML)(),{searchResults:G}=(0,Z.r$)(),[T,Y]=(0,t.useState)(!1),[K,V]=(0,t.useState)(null),[U,X]=(0,t.useState)([]);(0,t.useEffect)(()=>{if(k&&0===C.length){let e=G.find(e=>e.id===k);e&&console.log("Found flight for booking:",e)}B("default").then(e=>{e&&console.log("Loaded draft booking")})},[k,C.length,G]);let $=[{id:"flights",title:"Flights",description:"Select your flights",icon:i.Z,completed:A.includes("flights"),current:"flights"===P},{id:"passengers",title:"Passengers",description:"Enter passenger details",icon:n.Z,completed:A.includes("passengers"),current:"passengers"===P},{id:"seats",title:"Seats",description:"Choose your seats",icon:c.Z,completed:A.includes("seats"),current:"seats"===P},{id:"extras",title:"Extras",description:"Add baggage & meals",icon:d.Z,completed:A.includes("extras"),current:"extras"===P},{id:"payment",title:"Payment",description:"Complete payment",icon:o.Z,completed:A.includes("payment"),current:"payment"===P}],H=q(),J=e=>{$.findIndex(s=>s.id===e)<=$.findIndex(e=>e.id===P)&&console.log("Navigate to step:",e)},W=async()=>{if(!I(P)){V("Please complete all required fields before proceeding");return}V(null),Y(!0);try{z()&&(await R(),F())}catch(e){V("Failed to save progress. Please try again."),console.error("Step navigation error:",e)}finally{Y(!1)}},ee=async()=>{try{await R()}catch(e){V("Failed to save draft"),console.error("Draft save error:",e)}},es=e=>{let s=S[e];(null==s?void 0:s.id)&&Q(s.id)},ea=e=>{e.id&&L(e.id,e)},er=A.length/($.length-1)*100;return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white border-b sticky top-0 z-40",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(N.z,{variant:"ghost",onClick:()=>y.push("/flights"),className:"flex items-center space-x-2",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Back to Flights"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(N.z,{variant:"outline",onClick:ee,className:"flex items-center space-x-2",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Save Draft"})]}),(0,r.jsx)(N.z,{variant:"ghost",onClick:()=>{confirm("Are you sure you want to clear this booking?")&&(M(),y.push("/flights"))},className:"text-red-600 hover:text-red-700",children:"Cancel Booking"})]})]})})}),(0,r.jsx)("div",{className:"bg-white border-b",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Complete Your Booking"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Step ",$.findIndex(e=>e.id===P)+1," of ",$.length]})]}),(0,r.jsx)(w,{value:er,className:"mb-6"}),(0,r.jsx)("div",{className:"flex items-center justify-between",children:$.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center flex-1 cursor-pointer",onClick:()=>J(e.id),children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"\n                    w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium\n                    ".concat(e.completed?"bg-primary text-white":e.current?"bg-primary text-white":"bg-gray-200 text-gray-600","\n                  "),children:e.completed?(0,r.jsx)(u.Z,{className:"h-5 w-5"}):s+1}),(0,r.jsxs)("div",{className:"ml-3 hidden sm:block",children:[(0,r.jsx)("p",{className:"text-sm font-medium ".concat(e.current?"text-primary":"text-gray-900"),children:e.title}),(0,r.jsx)("p",{className:"text-xs text-gray-500 hidden lg:block",children:e.description})]})]}),s<$.length-1&&(0,r.jsx)(j.Z,{className:"h-4 w-4 text-gray-400 mx-4 hidden sm:block"})]},e.id))})]})}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2",children:[K&&(0,r.jsx)(v.Zb,{className:"mb-6 border-red-200 bg-red-50",children:(0,r.jsx)(v.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-red-600",children:[(0,r.jsx)(m.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:K})]})})}),(()=>{switch(P){case"flights":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Selected Flights"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Review your selected flights before proceeding"})]}),C.map((e,s)=>(0,r.jsx)(v.Zb,{className:"border-primary",children:(0,r.jsx)(v.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:(0,r.jsx)(i.Z,{className:"h-5 w-5 text-primary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold",children:e.airline.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.legs[0].flightNumber})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Price per person"}),(0,r.jsx)("p",{className:"text-lg font-bold text-primary",children:(0,b.xG)(e.price.total)})]})]})})},e.id||s)),0===C.length&&(0,r.jsx)(v.Zb,{children:(0,r.jsxs)(v.aY,{className:"p-8 text-center",children:[(0,r.jsx)(m.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Flights Selected"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Please select flights to continue with your booking"}),(0,r.jsx)(N.z,{onClick:()=>y.push("/flights"),children:"Search Flights"})]})})]});case"passengers":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Passenger Information"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Enter details for all travelers"})]}),(0,r.jsx)(N.z,{onClick:D,variant:"outline",children:"Add Passenger"})]}),0===S.length&&(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"No passengers added yet"}),(0,r.jsx)(N.z,{onClick:D,children:"Add First Passenger"})]}),S.map((e,s)=>(0,r.jsx)(O,{passengerIndex:s,passenger:e,onSave:ea,onRemove:()=>es(s),canRemove:S.length>1,isAdult:!0},e.id||s))]});case"seats":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Seat Selection"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Please select your preferred seats to continue"})]}),(0,r.jsx)(v.Zb,{className:"border-primary",children:(0,r.jsxs)(v.aY,{className:"p-6",children:[(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(x.Z,{className:"h-5 w-5 text-blue-600 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-blue-900",children:"Seat Selection Required"}),(0,r.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"You must select a seat for each passenger before proceeding to payment."})]})]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"font-semibold",children:"Available Seats"}),(0,r.jsx)("div",{className:"grid grid-cols-6 gap-2 max-w-xs mx-auto",children:["A","B","C","","D","E","F"].filter(e=>e).map(e=>Array.from({length:5},(s,a)=>{var t;if(""===e)return(0,r.jsx)("div",{className:"w-8"},"aisle-".concat(a));let l="".concat(a+1).concat(e);return(0,r.jsx)("button",{className:"w-10 h-10 rounded border-2 text-xs font-medium transition-colors\n                              ".concat((null===(t=H.selectedSeats)||void 0===t?void 0:t.includes(l))?"bg-primary text-white border-primary":"bg-gray-100 hover:bg-primary/20 border-gray-300"),onClick:()=>{console.log("Selected seat:",l)},children:l},l)}))}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-gray-100 border-2 border-gray-300 rounded"}),(0,r.jsx)("span",{children:"Available"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-primary border-2 border-primary rounded"}),(0,r.jsx)("span",{children:"Selected"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-gray-400 border-2 border-gray-400 rounded"}),(0,r.jsx)("span",{children:"Occupied"})]})]}),(0,r.jsx)("div",{className:"text-center text-sm text-gray-600 mt-4",children:"Click on a seat to select it for your booking"})]})]})})]});case"extras":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Extra Services"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Add baggage, meals, and other services"})]}),(0,r.jsx)(v.Zb,{children:(0,r.jsxs)(v.aY,{className:"p-8 text-center",children:[(0,r.jsx)(d.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Extra Services Coming Soon"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Add baggage, meals, and other services will be available soon"}),(0,r.jsx)(N.z,{className:"mt-4",onClick:W,children:"Continue Without Extras"})]})})]});case"payment":return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Payment"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Complete your booking with secure Paymob payment"})]}),(0,r.jsx)(v.Zb,{className:"border-primary",children:(0,r.jsxs)(v.aY,{className:"p-8 text-center",children:[(0,r.jsx)(o.Z,{className:"h-12 w-12 text-primary mx-auto mb-4"}),(0,r.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Ready to Pay"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Click below to proceed to our secure payment page powered by Paymob"}),(0,r.jsx)(N.z,{className:"mt-4",onClick:()=>{var e;return y.push("/payment?bookingId=".concat((null===(e=C[0])||void 0===e?void 0:e.id)||"new"))},children:"Proceed to Payment"})]})})]});default:return null}})(),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-8",children:[(0,r.jsxs)(N.z,{variant:"outline",onClick:()=>{_(),V(null)},disabled:"flights"===P,className:"flex items-center space-x-2",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Previous"})]}),(0,r.jsxs)(N.z,{onClick:W,disabled:T||"flights"===P&&0===C.length,loading:T,className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{children:"payment"===P?"Complete Booking":"Next"}),(0,r.jsx)(j.Z,{className:"h-4 w-4"})]})]})]}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)(v.Zb,{className:"sticky top-24",children:[(0,r.jsxs)(v.Ol,{children:[(0,r.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[(0,r.jsx)(d.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Booking Summary"})]}),(0,r.jsx)(v.SZ,{children:"Review your booking details"})]}),(0,r.jsxs)(v.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium mb-3",children:"Flights"}),C.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,r.jsxs)("span",{children:[e.legs[0].from.code," â†’ ",e.legs[0].to.code]}),(0,r.jsx)("span",{className:"font-medium",children:(0,b.xG)(e.price.total)})]},s))]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium mb-3",children:"Passengers"}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("span",{children:[S.length," traveler",1!==S.length?"s":""]}),(0,r.jsxs)("span",{className:"text-gray-600",children:[S.length," \xd7 ",C.reduce((e,s)=>e+s.price.total,0)]})]})]}),(0,r.jsx)("div",{className:"border-t pt-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:"Subtotal"}),(0,r.jsx)("span",{children:(0,b.xG)((null===(e=H.pricing)||void 0===e?void 0:e.basePrice)||0)})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:"Taxes & Fees"}),(0,r.jsx)("span",{children:(0,b.xG)((null===(s=H.pricing)||void 0===s?void 0:s.taxes)||0)})]}),(0,r.jsx)("div",{className:"border-t pt-2",children:(0,r.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,r.jsx)("span",{children:"Total"}),(0,r.jsx)("span",{className:"text-lg text-primary",children:(0,b.xG)((null===(a=H.pricing)||void 0===a?void 0:a.totalAmount)||0)})]})})]})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 text-green-600"}),(0,r.jsx)("span",{children:"Secure Booking"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 text-green-600"}),(0,r.jsx)("span",{children:"Best Price Guarantee"})]})]})]})]})})]})})]})},L=()=>((0,l.useRouter)(),(0,r.jsx)("div",{children:(0,r.jsx)(Q,{})}))},2827:function(e,s,a){"use strict";a.d(s,{I:function(){return i}});var r=a(7437),t=a(2265),l=a(3448);let i=t.forwardRef((e,s)=>{let{className:a,type:i,error:n,leftIcon:c,rightIcon:d,label:o,helperText:m,id:x,...h}=e,p=x||"input-".concat(t.useId());return(0,r.jsxs)("div",{className:"space-y-2",children:[o&&(0,r.jsx)("label",{htmlFor:p,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:o}),(0,r.jsxs)("div",{className:"relative",children:[c&&(0,r.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",children:c}),(0,r.jsx)("input",{type:i,id:p,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n&&"border-destructive focus-visible:ring-destructive",c&&"pl-10",d&&"pr-10",a),ref:s,...h}),d&&(0,r.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",children:d})]}),m&&(0,r.jsx)("p",{className:(0,l.cn)("text-xs",n?"text-destructive":"text-muted-foreground"),children:m})]})});i.displayName="Input"},1968:function(e,s,a){"use strict";a.d(s,{E:function(){return c},m:function(){return d}});var r=a(7437),t=a(2265),l=a(2325),i=a(519),n=a(3448);let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.fC,{className:(0,n.cn)("grid gap-2",a),...t,ref:s})});c.displayName=l.fC.displayName;let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.ck,{ref:s,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...t,children:(0,r.jsx)(l.z$,{className:"flex items-center justify-center",children:(0,r.jsx)(i.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=l.ck.displayName},6819:function(e,s,a){"use strict";a.d(s,{Bw:function(){return u},Ph:function(){return o},Ql:function(){return j},i4:function(){return x},ki:function(){return m}});var r=a(7437),t=a(2265),l=a(870),i=a(875),n=a(2135),c=a(401),d=a(3448);let o=l.fC;l.ZA;let m=l.B4,x=t.forwardRef((e,s)=>{let{className:a,children:t,error:n,leftIcon:c,...o}=e;return(0,r.jsxs)(l.xz,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n&&"border-destructive focus:ring-destructive",c&&"pl-10",a),...o,children:[c&&(0,r.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",children:c}),t,(0,r.jsx)(l.JO,{asChild:!0,children:(0,r.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=l.xz.displayName;let h=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.u_,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})})});h.displayName=l.u_.displayName;let p=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.$G,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});p.displayName=l.$G.displayName;let u=t.forwardRef((e,s)=>{let{className:a,children:t,position:i="popper",...n}=e;return(0,r.jsx)(l.h_,{children:(0,r.jsxs)(l.VY,{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...n,children:[(0,r.jsx)(h,{}),(0,r.jsx)(l.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(p,{})]})})});u.displayName=l.VY.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.__,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...t})}).displayName=l.__.displayName;let j=t.forwardRef((e,s)=>{let{className:a,children:t,...i}=e;return(0,r.jsxs)(l.ck,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.wU,{children:(0,r.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(l.eT,{children:t})]})});j.displayName=l.ck.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(l.Z0,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...t})}).displayName=l.Z0.displayName}},function(e){e.O(0,[8590,1299,7046,3186,5702,7500,1442,7762,2391,5644,2971,2117,1744],function(){return e(e.s=3161)}),_N_E=e.O()}]);