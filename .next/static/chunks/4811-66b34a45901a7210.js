"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4811],{2368:function(e,t,s){var r=s(7437),a=s(2265),n=s(9501),i=s(3590),l=s(7119),o=s(3774),d=s(8428),c=s(1047),u=s(2489),m=s(9397),h=s(5805),f=s(875),x=s(3247),p=s(6334),g=s(2827),v=s(6819),j=s(1385),y=s(6536),N=s(4626);let b=l.Ry({tripType:l.Km(["one-way","round-trip","multi-city"]),flights:l.IX(l.Ry({from:l.Z_().min(3,"From airport required"),to:l.Z_().min(3,"To airport required"),departureDate:l.Z_().min(1,"Departure date required"),returnDate:l.Z_().optional()})).min(1).max(4),passengers:l.Ry({adults:l.Rx().min(1,"At least one adult required").max(9,"Maximum 9 adults"),children:l.Rx().min(0).max(8,"Maximum 8 children"),infants:l.Rx().min(0).max(4,"Maximum 4 infants")}),cabinClass:l.Km(["economy","premium-economy","business","first"]),flexible:l.Ry({enabled:l.O7(),days:l.Rx().min(1).max(7)}),filters:l.Ry({directFlightsOnly:l.O7(),nearbyAirports:l.O7()})}).refine(e=>{if("round-trip"===e.tripType){let t=e.flights[0];if(t.returnDate&&t.departureDate)return new Date(t.returnDate)>new Date(t.departureDate)}return!0},{message:"Return date must be after departure date",path:["flights",0,"returnDate"]}),w=[{code:"NYC",name:"New York City",country:"USA"},{code:"LON",name:"London",country:"UK"},{code:"PAR",name:"Paris",country:"France"},{code:"LAX",name:"Los Angeles",country:"USA"},{code:"TKO",name:"Tokyo",country:"Japan"},{code:"SYD",name:"Sydney",country:"Australia"},{code:"DXB",name:"Dubai",country:"UAE"},{code:"SIN",name:"Singapore",country:"Singapore"}];t.Z=e=>{let{onSubmit:t,loading:s=!1,className:l="",compact:R=!1}=e,[C,k]=(0,a.useState)(!1),[T,O]=(0,a.useState)("round-trip"),{register:D,control:I,handleSubmit:S,watch:_,setValue:A,getValues:E,formState:{errors:z}}=(0,n.cI)({resolver:(0,i.F)(b),mode:"onSubmit",defaultValues:{tripType:"round-trip",flights:[{from:"",to:"",departureDate:"",returnDate:""}],passengers:{adults:1,children:0,infants:0},cabinClass:"economy",flexible:{enabled:!1,days:3},filters:{directFlightsOnly:!1,nearbyAirports:!1}}}),Z=_("flights"),P=_("passengers");_("cabinClass");let q=e=>{A("flights",Z.filter((t,s)=>s!==e))},F=e=>{let t=Z[e];A("flights.".concat(e,".from"),t.to),A("flights.".concat(e,".to"),t.from)};return(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-lg ".concat(R?"p-6":"p-8"," ").concat(l),children:(0,r.jsxs)("form",{onSubmit:S(e=>{console.log("=== Form Submit Debug ==="),console.log("Raw form data:",JSON.stringify(e,null,2));let s={tripType:e.tripType,passengers:e.passengers,cabinClass:e.cabinClass,flights:e.flights.map(t=>({from:t.from,to:t.to,departureDate:t.departureDate,..."round-trip"===e.tripType&&t.returnDate&&{returnDate:t.returnDate}})),flexible:e.flexible,filters:{...e.filters.directFlightsOnly&&{maxStops:0}}};console.log("Transformed flightSearchData:",JSON.stringify(s,null,2)),t(s)}),className:"space-y-6",children:[(0,r.jsx)(n.Qr,{name:"tripType",control:I,render:e=>{let{field:t}=e;return(0,r.jsx)(j.mQ,{value:t.value,onValueChange:e=>{t.onChange(e),O(e),A("flights",[{from:"",to:"",departureDate:"",returnDate:""}])},children:(0,r.jsxs)(j.dr,{className:"grid w-full grid-cols-3",children:[(0,r.jsx)(j.SP,{value:"one-way",children:"One Way"}),(0,r.jsx)(j.SP,{value:"round-trip",children:"Round Trip"}),(0,r.jsx)(j.SP,{value:"multi-city",children:"Multi City"})]})})}}),(0,r.jsxs)("div",{className:"space-y-4",children:[Z.map((e,t)=>{var s,a,n,i,l,m,h,f,x,j,y,N,b,R,C,k,O,I,S,_,E,P,M,U,Q;return(0,r.jsxs)("div",{className:"relative",children:[t>0&&(0,r.jsx)("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-300"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-center",children:["multi-city"===T&&(0,r.jsx)("div",{className:"hidden md:flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center text-sm font-medium",children:t+1})}),(0,r.jsxs)("div",{className:"multi-city"===T?"md:col-span-3":"md:col-span-5",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(g.I,{...D("flights.".concat(t,".from")),placeholder:"From where?",leftIcon:(0,r.jsx)(o.Z,{className:"h-4 w-4"}),error:!!(null===(a=z.flights)||void 0===a?void 0:null===(s=a[t])||void 0===s?void 0:s.from),className:"pr-10"}),(0,r.jsxs)(v.Ph,{children:[(0,r.jsx)(v.i4,{className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 border-none bg-transparent",children:(0,r.jsx)(v.ki,{})}),(0,r.jsx)(v.Bw,{children:w.map(e=>(0,r.jsx)(v.Ql,{value:e.code,onClick:()=>A("flights.".concat(t,".from"),e.code),children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.code}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.name})]})},e.code))})]})]}),(null===(i=z.flights)||void 0===i?void 0:null===(n=i[t])||void 0===n?void 0:n.from)&&(0,r.jsx)("p",{className:"text-xs text-red-600 mt-1",children:null===(m=z.flights[t])||void 0===m?void 0:null===(l=m.from)||void 0===l?void 0:l.message})]}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(p.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>F(t),className:"rotate-90 md:rotate-0",children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)("div",{className:"multi-city"===T?"md:col-span-3":"md:col-span-5",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(g.I,{...D("flights.".concat(t,".to")),placeholder:"To where?",leftIcon:(0,r.jsx)(o.Z,{className:"h-4 w-4"}),error:!!(null===(f=z.flights)||void 0===f?void 0:null===(h=f[t])||void 0===h?void 0:h.to),className:"pr-10"}),(0,r.jsxs)(v.Ph,{children:[(0,r.jsx)(v.i4,{className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 border-none bg-transparent",children:(0,r.jsx)(v.ki,{})}),(0,r.jsx)(v.Bw,{children:w.map(e=>(0,r.jsx)(v.Ql,{value:e.code,onClick:()=>A("flights.".concat(t,".to"),e.code),children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.code}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.name})]})},e.code))})]})]}),(null===(j=z.flights)||void 0===j?void 0:null===(x=j[t])||void 0===x?void 0:x.to)&&(0,r.jsx)("p",{className:"text-xs text-red-600 mt-1",children:null===(N=z.flights[t])||void 0===N?void 0:null===(y=N.to)||void 0===y?void 0:y.message})]}),(0,r.jsxs)("div",{className:"multi-city"===T?"md:col-span-4":"md:col-span-2",children:[(0,r.jsx)(g.I,{...D("flights.".concat(t,".departureDate")),type:"date",leftIcon:(0,r.jsx)(c.Z,{className:"h-4 w-4"}),error:!!(null===(R=z.flights)||void 0===R?void 0:null===(b=R[t])||void 0===b?void 0:b.departureDate),min:new Date().toISOString().split("T")[0]}),(null===(k=z.flights)||void 0===k?void 0:null===(C=k[t])||void 0===C?void 0:C.departureDate)&&(0,r.jsx)("p",{className:"text-xs text-red-600 mt-1",children:null===(I=z.flights[t])||void 0===I?void 0:null===(O=I.departureDate)||void 0===O?void 0:O.message})]}),"round-trip"===T&&0===t&&(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)(g.I,{...D("flights.".concat(t,".returnDate")),type:"date",placeholder:"Return",leftIcon:(0,r.jsx)(c.Z,{className:"h-4 w-4"}),error:!!(null===(_=z.flights)||void 0===_?void 0:null===(S=_[t])||void 0===S?void 0:S.returnDate),min:(null===(E=Z[0])||void 0===E?void 0:E.departureDate)||new Date().toISOString().split("T")[0]}),(null===(M=z.flights)||void 0===M?void 0:null===(P=M[t])||void 0===P?void 0:P.returnDate)&&(0,r.jsx)("p",{className:"text-xs text-red-600 mt-1",children:null===(Q=z.flights[t])||void 0===Q?void 0:null===(U=Q.returnDate)||void 0===U?void 0:U.message})]}),"multi-city"===T&&t>0&&(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(p.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>q(t),className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(u.Z,{className:"h-4 w-4"})})})]})]},t)}),"multi-city"===T&&Z.length<4&&(0,r.jsxs)(p.z,{type:"button",variant:"outline",onClick:()=>{Z.length<4&&A("flights",[...Z,{from:"",to:"",departureDate:"",returnDate:""}])},className:"w-full border-dashed",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Add Flight"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-gray-50",onClick:()=>k(!C),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(h.Z,{className:"h-5 w-5 text-gray-400"}),(0,r.jsx)("span",{className:"text-gray-900",children:(()=>{let{adults:e,children:t,infants:s}=P,r=[];return e>0&&r.push("".concat(e," Adult").concat(e>1?"s":"")),t>0&&r.push("".concat(t," Child").concat(t>1?"ren":"")),s>0&&r.push("".concat(s," Infant").concat(s>1?"s":"")),"".concat(e+t+s," ").concat(r.join(", "))})()})]}),(0,r.jsx)(f.Z,{className:"h-4 w-4 text-gray-400"})]}),C&&(0,r.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border rounded-lg shadow-lg z-10 p-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(N._,{className:"text-sm font-medium",children:"Adults (12+)"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,r.jsx)(p.z,{type:"button",variant:"outline",size:"icon",onClick:()=>A("passengers.adults",Math.max(1,P.adults-1)),disabled:P.adults<=1,children:"-"}),(0,r.jsx)("span",{className:"w-12 text-center",children:P.adults}),(0,r.jsx)(p.z,{type:"button",variant:"outline",size:"icon",onClick:()=>A("passengers.adults",Math.min(9,P.adults+1)),disabled:P.adults>=9,children:"+"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(N._,{className:"text-sm font-medium",children:"Children (2-11)"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,r.jsx)(p.z,{type:"button",variant:"outline",size:"icon",onClick:()=>A("passengers.children",Math.max(0,P.children-1)),disabled:P.children<=0,children:"-"}),(0,r.jsx)("span",{className:"w-12 text-center",children:P.children}),(0,r.jsx)(p.z,{type:"button",variant:"outline",size:"icon",onClick:()=>A("passengers.children",Math.min(8,P.children+1)),disabled:P.children>=8,children:"+"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(N._,{className:"text-sm font-medium",children:"Infants (under 2)"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,r.jsx)(p.z,{type:"button",variant:"outline",size:"icon",onClick:()=>A("passengers.infants",Math.max(0,P.infants-1)),disabled:P.infants<=0,children:"-"}),(0,r.jsx)("span",{className:"w-12 text-center",children:P.infants}),(0,r.jsx)(p.z,{type:"button",variant:"outline",size:"icon",onClick:()=>A("passengers.infants",Math.min(4,P.infants+1)),disabled:P.infants>=4,children:"+"})]})]})]})})]}),(0,r.jsx)(n.Qr,{name:"cabinClass",control:I,render:e=>{let{field:t}=e;return(0,r.jsxs)(v.Ph,{value:t.value,onValueChange:t.onChange,defaultValue:"economy",children:[(0,r.jsx)(v.i4,{children:(0,r.jsx)(v.ki,{placeholder:"Select class"})}),(0,r.jsxs)(v.Bw,{children:[(0,r.jsx)(v.Ql,{value:"economy",children:"Economy"}),(0,r.jsx)(v.Ql,{value:"premium-economy",children:"Premium Economy"}),(0,r.jsx)(v.Ql,{value:"business",children:"Business"}),(0,r.jsx)(v.Ql,{value:"first",children:"First Class"})]})]})}})]}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.Qr,{name:"flexible.enabled",control:I,render:e=>{let{field:t}=e;return(0,r.jsx)(y.X,{checked:t.value,onCheckedChange:t.onChange})}}),(0,r.jsx)(N._,{className:"text-sm",children:"Flexible dates"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.Qr,{name:"filters.directFlightsOnly",control:I,render:e=>{let{field:t}=e;return(0,r.jsx)(y.X,{checked:t.value,onCheckedChange:t.onChange})}}),(0,r.jsx)(N._,{className:"text-sm",children:"Direct flights only"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.Qr,{name:"filters.nearbyAirports",control:I,render:e=>{let{field:t}=e;return(0,r.jsx)(y.X,{checked:t.value,onCheckedChange:t.onChange})}}),(0,r.jsx)(N._,{className:"text-sm",children:"Include nearby airports"})]})]}),(0,r.jsx)(p.z,{type:"submit",loading:s,disabled:s,className:"w-full sm:w-auto btn-glow",leftIcon:(0,r.jsx)(x.Z,{className:"h-4 w-4"}),children:"Search Flights"})]})})]})})}},2827:function(e,t,s){s.d(t,{I:function(){return i}});var r=s(7437),a=s(2265),n=s(3448);let i=a.forwardRef((e,t)=>{let{className:s,type:i,error:l,leftIcon:o,rightIcon:d,label:c,helperText:u,id:m,...h}=e,f=m||"input-".concat(a.useId());return(0,r.jsxs)("div",{className:"space-y-2",children:[c&&(0,r.jsx)("label",{htmlFor:f,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:c}),(0,r.jsxs)("div",{className:"relative",children:[o&&(0,r.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",children:o}),(0,r.jsx)("input",{type:i,id:f,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l&&"border-destructive focus-visible:ring-destructive",o&&"pl-10",d&&"pr-10",s),ref:t,...h}),d&&(0,r.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",children:d})]}),u&&(0,r.jsx)("p",{className:(0,n.cn)("text-xs",l?"text-destructive":"text-muted-foreground"),children:u})]})});i.displayName="Input"},6819:function(e,t,s){s.d(t,{Bw:function(){return x},Ph:function(){return c},Ql:function(){return p},i4:function(){return m},ki:function(){return u}});var r=s(7437),a=s(2265),n=s(870),i=s(875),l=s(2135),o=s(401),d=s(3448);let c=n.fC;n.ZA;let u=n.B4,m=a.forwardRef((e,t)=>{let{className:s,children:a,error:l,leftIcon:o,...c}=e;return(0,r.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",l&&"border-destructive focus:ring-destructive",o&&"pl-10",s),...c,children:[o&&(0,r.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",children:o}),a,(0,r.jsx)(n.JO,{asChild:!0,children:(0,r.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});h.displayName=n.u_.displayName;let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})});f.displayName=n.$G.displayName;let x=a.forwardRef((e,t)=>{let{className:s,children:a,position:i="popper",...l}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsxs)(n.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...l,children:[(0,r.jsx)(h,{}),(0,r.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(f,{})]})})});x.displayName=n.VY.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...a})}).displayName=n.__.displayName;let p=a.forwardRef((e,t)=>{let{className:s,children:a,...i}=e;return(0,r.jsxs)(n.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(n.eT,{children:a})]})});p.displayName=n.ck.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...a})}).displayName=n.Z0.displayName},1385:function(e,t,s){s.d(t,{SP:function(){return d},dr:function(){return o},mQ:function(){return l},nU:function(){return c}});var r=s(7437),a=s(2265),n=s(271),i=s(3448);let l=n.fC,o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a})});o.displayName=n.aV.displayName;let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...a})});d.displayName=n.xz.displayName;let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});c.displayName=n.VY.displayName},3958:function(e,t,s){s.d(t,{ZL:function(){return g}});var r,a,n=s(3464);class i extends Error{constructor(e,t="UNKNOWN_ERROR",s=500,r=!0,a){super(e),this.code=t,this.statusCode=s,this.isOperational=r,this.context=a,Error.captureStackTrace&&Error.captureStackTrace(this,i),Object.setPrototypeOf(this,i.prototype)}}class l extends i{constructor(e,t,s){super(e,"VALIDATION_ERROR",400,!0,{field:t,...s})}}class o extends i{constructor(e="Authentication required",t){super(e,"AUTHENTICATION_ERROR",401,!0,t)}}class d extends i{constructor(e="Insufficient permissions",t){super(e,"AUTHORIZATION_ERROR",403,!0,t)}}class c extends i{constructor(e="Resource not found",t){super(e,"NOT_FOUND_ERROR",404,!0,t)}}class u extends i{constructor(e="Network error occurred",t){super(e,"NETWORK_ERROR",0,!0,t)}}class m extends i{constructor(e="Request timed out",t,s){super(e,"TIMEOUT_ERROR",408,!0,{timeout:t,...s})}}class h extends i{constructor(e,t,s,r){super(e,"API_ERROR_".concat(t),t,!0,{response:null==s?void 0:s.status,...r})}}let f=e=>{var t,s;if(e instanceof i)return e;if(null==e?void 0:e.response){let t=e.response.status,s=e.response.data;if(400===t&&(null==s?void 0:s.errors)){let e="Validation failed";return Array.isArray(s.errors)?e=s.errors.map(e=>e.msg||e.message).join(", "):"object"==typeof s.errors&&(e=Object.values(s.errors)[0]||"Validation failed"),new l(e,void 0,s)}return 401===t?new o((null==s?void 0:s.message)||"Authentication required"):403===t?new d((null==s?void 0:s.message)||"Insufficient permissions"):404===t?new c((null==s?void 0:s.message)||"Resource not found"):408===t?new m((null==s?void 0:s.message)||"Request timed out"):t>=500?new h((null==s?void 0:s.message)||"Server error occurred",t,e.response,s):new h((null==s?void 0:s.message)||e.message,t,e.response,s)}return(null==e?void 0:e.code)==="NETWORK_ERROR"||(null==e?void 0:null===(t=e.message)||void 0===t?void 0:t.includes("Network"))?new u(e.message):(null==e?void 0:e.code)==="TIMEOUT_ERROR"||(null==e?void 0:null===(s=e.message)||void 0===s?void 0:s.includes("timeout"))?new m(e.message):new i((null==e?void 0:e.message)||"An unexpected error occurred","UNKNOWN_ERROR",500,!0,{originalError:e})};(r=a||(a={})).LOW="low",r.MEDIUM="medium",r.HIGH="high",r.CRITICAL="critical";class x{getStoredToken(){return localStorage.getItem("auth_token")}async handleRequest(e,t,s,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;try{return(await this.client.request({method:e,url:t,data:s,...r})).data}catch(l){let i=f(l);if("AUTHENTICATION_ERROR"===i.code)throw this.clearStoredToken(),window.location.href="/login",i;if(i instanceof u&&a<n){let i=1e3*Math.pow(2,a);return await new Promise(e=>setTimeout(e,i)),this.handleRequest(e,t,s,r,a+1,n)}if(i instanceof m&&a<n){let i=1e3*Math.pow(2,a);return await new Promise(e=>setTimeout(e,i)),this.handleRequest(e,t,s,r,a+1,n)}throw i}}clearStoredToken(){localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token")}async get(e,t){return this.handleRequest("GET",e,void 0,t)}async post(e,t,s){return this.handleRequest("POST",e,t,s)}async put(e,t,s){return this.handleRequest("PUT",e,t,s)}async delete(e,t){return this.handleRequest("DELETE",e,void 0,t)}async patch(e,t,s){return this.handleRequest("PATCH",e,t,s)}constructor(){this.client=n.Z.create({baseURL:"http://localhost:8082/api",timeout:3e4,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{let t=this.getStoredToken();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,e=>{let t=f(e);return console.error("API Error:",t),Promise.reject(t)})}}let p=new x,g={searchFlights:async e=>p.post("/flights/search",e),getFlightDetails:async e=>p.get("/flights/".concat(e)),getFlightPrices:async e=>p.get("/flights/".concat(e,"/prices")),getSeatMap:async(e,t)=>{let s=t?"/flights/".concat(e,"/seatmap/").concat(t):"/flights/".concat(e,"/seatmap");return p.get(s)}}}}]);